<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>kola\html\Properties.js - kola</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="kola"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Array.html">Array</a></li>
            
                <li><a href="..&#x2F;classes/Class.html">Class</a></li>
            
                <li><a href="..&#x2F;classes/Function.html">Function</a></li>
            
                <li><a href="..&#x2F;classes/Package.html">Package</a></li>
            
                <li><a href="..&#x2F;classes/String.html">String</a></li>
            
                <li><a href="..&#x2F;classes/window.html">window</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/kola.html">kola</a></li>
            
                <li><a href="..&#x2F;modules/kola.lang.html">kola.lang</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: kola\html\Properties.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
kola(&#x27;kola.html.Properties&#x27;,[
    &#x27;kola.html.ElementCore&#x27;,
    &#x27;kola.bom.Browser&#x27;,
    &#x27;kola.lang.String&#x27;
],function(KElement,Browser,KolaString){
    var Properties={
        &#x2F;**
		 * 获取某个属性值
		 * @param {String} name 属性名
		 * @return 属性值
		 * @type String
		 *&#x2F;
		&#x2F;**
		 * 设置某个属性值
		 * @param {String} name 属性名
		 * @param value 属性值
		 * @return 当前的Element对象
		 * @type Element
		 *&#x2F;
		attr: function(name, value) {
			if (typeof(value) == &#x27;undefined&#x27;) {
				&#x2F;&#x2F;	现在是要获取属性值
				var element = this[0];
				switch(name) {
					case &#x27;class&#x27;:
						return element.className;
					case &#x27;style&#x27;:
						return element.style.cssText;
					default:
						return attr(element, name);
				}
			} else {
				&#x2F;&#x2F;	现在是要设置属性值
				this._each( function(element) {
					switch(name) {
						case &#x27;class&#x27;:
							element.className = value;
							break;
						case &#x27;style&#x27;:
							element.style.cssText = value;
							break;
						default:
							&#x2F;&#x2F;	如果是设置一个事件，而且是ie下的话，需要采用.on...的形式，setAttribute的形式是有问题的
							if (document.all &amp;&amp; name.indexOf(&#x27;on&#x27;) == 0) {
								&#x2F;&#x2F;	如果是字符串，需要转换成一个方法，ie下只能接受方法
								if (typeof(value) == &#x27;string&#x27;) {
									value = new Function(value);
								}
								element[name] = value;
							} else {
								element.setAttribute(name, value);
							}
					}
				});
				return this;
			}
		},

		&#x2F;**
		 * 判断是否存在某个属性
		 *&#x2F;
		hasAttr: function( name ) {
			var element = this[0];
			return element.hasAttribute ? element.hasAttribute( name ) : false;
		},
		
		&#x2F;**
		 * 删除某个属性值
		 * @param {String} name 属性名
		 * @return 当前的Element对象
		 * @type kola.html.Element
		 *&#x2F;
		removeAttr: function(name) {
			this._each( function(element) {
				element.removeAttribute(name);
			});
			return this;
		},
	
		&#x2F;**
		 * 获取某个属性值
		 * @param {String} name 属性名
		 * @return 属性值
		 * @type String
		 *&#x2F;
		&#x2F;**
		 * 设置某个属性值
		 * @param {String} name 属性名
		 * @param {ANY} value 属性值
		 * @return 当前的Element对象
		 * @type kola.html.Element
           @warning 在ie67下设置可能会导致内存泄露
		 *&#x2F;
         
		prop: function(name, value) {
			if (typeof(value) == &#x27;undefined&#x27;) {
				var element = this[0],
					valueString = element[name];
				
				&#x2F;&#x2F;	如果存在有意义值的话，需要进行相应的判断
				if (typeof valueString == &#x27;string&#x27;) {
					var valueLength = valueString.length;
					
					&#x2F;&#x2F;	修复IE下，获取A标签的host，会默认加上:80的问题
					if (name == &#x27;host&#x27;
							&amp;&amp; valueLength &gt; 3 
							&amp;&amp; element.protocol.toLowerCase() == &#x27;http:&#x27; 
							&amp;&amp; valueString.substr(valueLength - 3) == &#x27;:80&#x27;) {
						
						valueString = valueString.substr(0, valueLength - 3);
					}
					
					&#x2F;&#x2F;	修复IE下，获取A标签的pathname，没有最开始的&#x2F;的问题
					if (name == &#x27;pathname&#x27;) {
						if (valueLength &gt; 0) {
							&#x2F;&#x2F;	如果第一个不是&#x2F;，那就增加之
							if (valueString.charAt(0) != &#x27;&#x2F;&#x27;) {
								valueString = &#x27;&#x2F;&#x27; + valueString;
							}
						} else {
							&#x2F;&#x2F;	如果实在根目录，那就直接设置为&#x2F;
							valueString = &#x27;&#x2F;&#x27;;
						}
					}
				}
				
				&#x2F;&#x2F;	获取属性值
				return valueString;
			} else {
				&#x2F;&#x2F;	设置属性值
				this._each( function(element) {
					element[name] = value;
				});
				return this;
			}
		},
		&#x2F;**
		 * 删除某个属性值
		 * @param {String} name 属性名
		 * @type String
		 *&#x2F;
		removeProp: function(name) {
            this._each( function(element) {
                element[name] = null;
            });
            return this;
		},
		&#x2F;**
		 * 判断当前对象是否存在指定的样式
		 * @param {String} name 样式名儿
		 * @return 存在返回true，不存在返回false
		 * @type Boolean
		 *&#x2F;
		hasClass: function(name) {
			var str = this[0].className;
			return str.length &gt; 0 &amp;&amp; (&#x27; &#x27; + str + &#x27; &#x27;).indexOf(name) != -1;
		},
		
		&#x2F;**
		 * 判断当前对象是否存在指定的样式
		 * @param {String} name 样式名儿
		 * @return 存在返回true，不存在返回false
		 * @type Boolean
		 *&#x2F;
		addClass: function(name) {
			if ( typeof( name ) != &#x27;string&#x27; || name.length == 0 ) return this;
            var _this = this;
			this._each( function(element) {
                if(element.className.indexOf(name)==-1){
				    element.className += &#x27; &#x27; + name;
                }
			});
			return this;
		},
		&#x2F;**
		 * 移除指定样式
		 * @param {String} name 样式名儿
		 * @return 存在返回true，不存在返回false
		 * @type Boolean
		 *&#x2F;
		removeClass: function(name) {
			if ( typeof( name ) != &#x27;string&#x27; || name.length == 0 ) return this;
			this._each( function(element) {
				var str = element.className,index;
				if (str.length &gt; 0 &amp;&amp; (index = (str = (&#x27; &#x27; + str + &#x27; &#x27;)).indexOf(name)) != -1) {
					element.className = KolaString.trim(str.split(name).join(&#x27; &#x27;).replace(&#x2F;[ ]{2,}&#x2F;g,&#x27; &#x27;));
				}
			});
			return this;
		},
		&#x2F;*-------------------------------------- 样式和位置相关 --------------------------------------*&#x2F;
		&#x2F;**
		 * 获取某个样式属性值
		 * @param {String} name 属性名
		 * @return 属性值
		 * @type String
		 *&#x2F;
		&#x2F;**
		 * 设置某个样式属性值
		 * @param {String} name 属性名
		 * @param {ANY} value 属性值
		 * @return 当前的Element对象
		 * @type kola.html.Element
		 *&#x2F;
		style: function(name, value) {
            &#x2F;&#x2F;将名称转为驼峰式
            name=name.replace(&#x2F;-([a-z])&#x2F;ig,function( all, letter ) {return letter.toUpperCase();});
			if (typeof(value) == &#x27;undefined&#x27;) {
				var element = this[0],
					st = element.style;
				if (name == &#x27;opacity&#x27;) {
					var filter;
					if (Browser.IEStyle) {
						return filter.indexOf(&quot;opacity=&quot;) &gt;= 0 ? parseFloat(filter.match(&#x2F;opacity=([^)]*)&#x2F;)[1]) &#x2F; 100 : 1;
					} else {
						return (filter = st.opacity) ? parseFloat(filter) : 1;
					}
				} else {
					return KElement.util.getComputedStyle( element, name );
				}
			} else {
				this._each(function(element) {
					var st = element.style;
					if (name == &#x27;opacity&#x27;) {
						if (Browser.IEStyle) {
							st.filter = &#x27;Alpha(Opacity=&#x27; + value*100 + &#x27;)&#x27;; 
						} else {
							st.opacity = (value == 1 ? &#x27;&#x27;: &#x27;&#x27; + value);
						}
					} else {
                        &#x2F;&#x2F;如果是数字，自动加px
                        var newValue=parseFloat(value);
                        if(newValue==value &amp;&amp; !noPx[name])
                            value=value+&quot;px&quot;;
                        st[name] = value;
					}
				});
				return this;
			}
		},
		
		&#x2F;**
		 * 删除某个样式值
		 * @param {String} name 属性名
		 * @return 当前的Element对象
		 * @type kola.html.Element
		 *&#x2F;
		removeStyle: function(name) {
			this._each( function(element) {
				var s = element.style;
				if (s.removeProperty) {
					s.removeProperty(name);
				} else if (s.removeAttribute) {
					if (name == &#x27;opacity&#x27; &amp;&amp; typeof(element.style.filter) == &#x27;string&#x27;) {
						name = &#x27;filter&#x27;;
					}
					s.removeAttribute(name);
				} else {
					s[name] = null;
				}
			});
			return this;
		}
    }
    var noPx={
		&quot;zIndex&quot;: true,
		&quot;fontWeight&quot;: true,
		&quot;opacity&quot;: true,
		&quot;zoom&quot;: true,
		&quot;lineHeight&quot;: true
	};
    &#x2F;**
	 * 获取一个对象的某个attribute，主要是为了解决IE下在form节点上获取attribute不对的问题
	 *&#x2F;
	var attr = function(element, name) {
	
		var value = element.getAttribute(name);
		
		&#x2F;&#x2F;todo:对表单元素属性的封装
		if(value==null)
			value=element[name];
		if (document.all &amp;&amp; typeof(value) == &#x27;object&#x27; &amp;&amp; value != null) {
			value = element.attributes.getNamedItem(name);
			return !!value ? value.value : null;
		}
		return value;
	};
    return Properties;
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
