<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>kola\html\Traveller.js - kola</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="kola"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Array.html">Array</a></li>
            
                <li><a href="..&#x2F;classes/Class.html">Class</a></li>
            
                <li><a href="..&#x2F;classes/Function.html">Function</a></li>
            
                <li><a href="..&#x2F;classes/Package.html">Package</a></li>
            
                <li><a href="..&#x2F;classes/String.html">String</a></li>
            
                <li><a href="..&#x2F;classes/window.html">window</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/kola.html">kola</a></li>
            
                <li><a href="..&#x2F;modules/kola.lang.html">kola.lang</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: kola\html\Traveller.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
kola(&#x27;kola.html.Traveller&#x27;, 
	[&#x27;kola.lang.Object&#x27;,&#x27;kola.html.ElementCore&#x27;,&#x27;kola.lang.Array&#x27;,&#x27;kola.css.Selector&#x27;],
function(O,KElement,A,Selector){
    var Traveller={
        &#x2F;*
            TODO:
                
                remove()
                first()
                last()
                index()
        *&#x2F;
        &#x2F;**
            给element增加一些元素
            @param sets string,element,kolaElement
        *&#x2F;
        add:function(sets){
            var elements=KElement.util.toElements(sets);
            for(var i=0,il=elements.length;i&lt;il;i++){
                for(var j=0,jl=this.length;j&lt;jl;j++){
                    if(this[j]==elements[i])
                        break;
                }
                if(j==jl){
                    this[this.length]=elements[i];
                    this._elements[this.length]=elements[i];
                    this.length++;
                }
            }
            return this;
        },
        &#x2F;**
            给element排除一些元素
            @param sets element,kolaElement
        *&#x2F;
        not:function(sets){
            var elements=KElement.util.toElements(sets);
            for(var i=0,il=elements.length;i&lt;il;i++){
                for(var j=0,jl=this.length;j&lt;jl;j++){
                    if(this[j]==elements[i]){
                        this.splice(j,1);
                        this._elements.splice(j,1);
                    }
                }
            }
            return this;
        },
        index:function(selector){
            var elem=this[0];
            if(!elem)
                return -1;
            if(selector)
                return A.indexOf(KElement(elem.parentNode).children(selector),elem);
            else
                return A.indexOf(elem.parentNode.children,elem);
        },
        filter:function(selector){
            return new KElement(Selector.filter(selector,this._elements));
        },
        is:function(selector){
            if(this.length==0)
                return false;
            return Selector.filter( selector, [this[0]] ).length &gt; 0;
        },
        clone:function(){
            var newNodes=[]
            for(var i=0,il=this.length;i&lt;il;i++)
                newNodes.push(this[i].cloneNode(true));
            KElement.fire({type:&quot;DOMNodeInserted&quot;,data:newNodes});
            return new KElement(newNodes);
        }
    };
    var SingleTraveller={
        &#x2F;**
            得到父元素
        *&#x2F;
        parent:function(element){
            return element.parentNode;
        },
        &#x2F;**
            得到符合条件的祖先元素
        *&#x2F;
        parents:function(element,selector){
            var nodes=[];
            while ((element = element.parentNode) &amp;&amp; (element.nodeType == 1)) {
                nodes.push(element);
            }
            return Selector(selector,nodes);
        },
        &#x2F;**
            元素及其祖先元素中最靠近当前元素的符合条件的元素
        *&#x2F;
        closest:function(element,selector){
            &#x2F;&#x2F;如果是选择器，则找到符合选择器的元素
            if(O.isString(selector)){
                while (element.nodeType == 1) {
                    if(Selector.matchesSelector(element,selector))
                        return element;
                    element = element.parentNode
                }
            }else{&#x2F;&#x2F;如果是数组，则从数组中找
                while (element.nodeType == 1) {
                    if(A.indexOf(selector,element)!=-1)
                        return element;
                    element = element.parentNode
                }
            }
        },
        &#x2F;**
            得到符合selector的子元素
        *&#x2F;
        children:function(element, selector){
            var c=[];
            for(var i=0;i&lt;element.children.length;i++)
                c[i]=element.children[i];
            return Selector.filter(selector,c);
        },
        &#x2F;**
            得到改dom上符合selector的元素
        *&#x2F;
        find:function(element, selector){
            return Selector(selector,element).concat(Selector.filter(selector,[element]));
        },
        &#x2F;**
            得到子树上符合selector的元素
        *&#x2F;
        decendent:function(element, selector){
            return Selector(selector,element);
        },
        &#x2F;**
		 * 拿到每一个元素的前一个兄弟节点
		 * @return 包含了所有节点的Element对象
		 * @type kola.html.Element
		 *&#x2F;
        prev:function(element, selector){
            while ( element = element.previousSibling ) {
                if ( element.nodeType == 1 ) {
                    if(!selector || Selector.matchesSelector(element,selector))
                        return element;
                }
            }
        },
        &#x2F;**
		 * 拿到每一个元素的后一个兄弟节点
		 * @return 包含了所有节点的Element对象
		 * @type kola.html.Element
		 *&#x2F;
        next:function(element, selector){
            while ( element = element.nextSibling ) {
                if ( element.nodeType == 1 ) {
                    if(!selector || Selector.matchesSelector(element,selector))
                        return element;
                }
            }
        },
        &#x2F;**
		 * 拿到每一个元素的第一个子节点
		 * @return 包含了所有节点的Element对象
		 * @type kola.html.Element
		 *&#x2F;
		firstChild: function(element){
            var length = element.children.length;
            for (var j = 0; j &lt; length; j++) {
                var child = element.children[j];
                if (!!child &amp;&amp; child.nodeType == 1) {
                    return child;
                }
            }
		},
		&#x2F;**
		 * 拿到每一个元素的最后一个子节点
		 * @return 包含了所有节点的Element对象
		 * @type kola.html.Element
		 *&#x2F;
		lastChild: function(element) {
            var length = element.children.length;
            for (var j = length - 1; j &gt;= 0; j--) {
                var child = element.children[j];
                if (!!child &amp;&amp; child.nodeType == 1) {
                    return child;
                }
            }
		}
    }
    O.each(SingleTraveller,function(name,func){
        Traveller[name]=function(selector){
            var nodes=[];
            var _this=this;
            this._each(function(element){
                var res=func.call(_this,element,selector);
                if(O.isArray(res))
                    nodes=nodes.concat(res);
                else if(res){
                    nodes.push(res);
                }
			});
            nodes=unique(nodes);
            return new KElement(nodes);
        }
    });
    &#x2F;**
    数组排除重复元素
    *&#x2F;
	var unique=function(array){
        var flag=false;
        var le=array.length;
        for(var i=0;i&lt;le;i++){
            for(j=i+1;j&lt;le;j++){
                if(array[i]===array[j]){
                    array[j]=null;
                    flag=true;
                }
            }
        }
        if(flag){
            var top=0;
            for(var i=0;le;i++){
                if(array[i]!==null)
                    array[top++]=array[i];
            }
            array.splice(top,le-top);
        }
        return array;
    }
    return Traveller;
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
