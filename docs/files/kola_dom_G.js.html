<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>kola\dom\G.js - kola</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="kola"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Array.html">Array</a></li>
            
                <li><a href="..&#x2F;classes/Class.html">Class</a></li>
            
                <li><a href="..&#x2F;classes/Function.html">Function</a></li>
            
                <li><a href="..&#x2F;classes/Object.html">Object</a></li>
            
                <li><a href="..&#x2F;classes/Packager.html">Packager</a></li>
            
                <li><a href="..&#x2F;classes/String.html">String</a></li>
            
                <li><a href="..&#x2F;classes/window.html">window</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/kola.html">kola</a></li>
            
                <li><a href="..&#x2F;modules/kola.lang.html">kola.lang</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: kola\dom\G.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
kola(&quot;kola.dom.G&quot;,[
	&quot;kola.lang.Class&quot;,
	&quot;kola.dom.Operation&quot;,
	&quot;kola.dom.util.Selector&quot;,
	&quot;kola.event.Dispatcher&quot;
],function(KolaClass, Operation, Selector, Dispatcher){
	var exports = KolaClass(Dispatcher, {
		__ME: function(selector){
			if(KolaClass.isString(selector) &amp;&amp; selector.charAt(0) != &#x27;&lt;&#x27;){
				&#x2F;**
				* 使用选择器选择特定dom
				* @function direct
				* @param selector {String}
				* @return {KolaElement}
				*&#x2F;
				return new this(Selector(selector));
			}else{
				&#x2F;**
				* 根据字符串生成dom，并生成KolaElement
				* @function direct
				* @param selector {String} 要转换的字符串，以html &lt; 格式开头
				* @return {KolaElement}
				*&#x2F;
				&#x2F;**
				* 将指定的dom转换为KolaElement
				* @function direct
				* @param selector {Array&lt;HTMLElement&gt;|NodeList|HtmlCollection|HtmlElement|KolaElement}
				* @return {KolaElement}
				*&#x2F;
				return new this(toElements(selector));
			}
		},

		&#x2F;**
		* 构造函数
		* @constructor
		* @param elements {Array&lt;HTMLElement&gt;}
		* @return {KolaElement}
		*&#x2F;
		_init: function(elements){
			this.length = elements.length;
			for(var i = 0, il = this.length; i &lt; il; i ++)
				this[i] = elements[i];
		},

		&#x2F;**
		* 依次迭代内部dom，将内部每一个元素封装成KolaElement交给callback处理
		* @method each
		* @param callback {Function} 回调函数
		* @chainable
		*&#x2F;
		each: function (callback) {
			&#x2F;&#x2F;	使用迭代器循环每个元素
			for(var i = 0, il = this.length; i &lt; il; i++){
				callback.call(this, this.constructor(this[i]), i);
			}
			return this;
		},

		&#x2F;**
            给element增加一些元素
            @param sets string,element,kolaElement
        *&#x2F;
        add: function(sets){
            var elements = toElements(sets);
            for(var i = 0, il = elements.length; i &lt; il ; i ++){
                for(var j = 0, jl = this.length; j &lt; jl; j ++){
                    if(this[j] == elements[i])
                        break;
                }
                if(j == jl){
                    this[this.length] = elements[i];
                    this._elements[this.length] = elements[i];
                    this.length++;
                }
            }
            return this;
        },

        &#x2F;**
            给element排除一些元素
            @param sets element,kolaElement
        *&#x2F;
        remove: function(sets){
            var elements=toElements(sets);
            &#x2F;&#x2F;Array.prototype.concat.call(this, sets);
            for(var i=0,il=elements.length;i&lt;il;i++){
                for(var j=0,jl=this.length;j&lt;jl;j++){
                    if(this[j]==elements[i]){
                        this.splice(j,1);
                        this._elements.splice(j,1);
                    }
                }
            }
            return this;
        },
        &#x2F;*-------------------------------------- KolaElement内部函数 --------------------------------------*&#x2F;
		&#x2F;**
		* 依次迭代内部dom，将内部每一个元素交给callback处理
		* @method _each
		* @private
		* @param callback {Function} 回调函数
		* @chainable
		*&#x2F;
		_each: function (callBack) {
			for(var i = 0, il = this.length; i &lt; il; i ++){
				callBack.call(this,this[i]);
			}
			return this;
		},
		&#x2F;&#x2F;使得浏览器认为实例是一个数组，方便调试
		splice:[].splice
	});
	
	&#x2F;&#x2F;元素操作
	for(key in Operation){
		(function(functionName, item){
			if(KolaClass.isArray(item)){
				exports.prototype[functionName] = function(name, value){
					if(arguments.length == 1){&#x2F;&#x2F;只有name的形式
						if(this[0].nodeType == 1){
							if(isChainable[0]){
								item[0].call(this, this[0], name);
								return this;
							}else{
								return item[0].call(this, this[0], name);
							}
						}
					}else{&#x2F;&#x2F;有name，value的形式
						if(isChainable[1]){
							for(var i = 0; i &lt; this.length; i++){
								item[1].call(this, this[i], name, value);
							}
							return this;
						}else{
							var results = [];
							for(var i = 0; i &lt; this.length; i++){
								results.concat(item[1].call(this, this[i], name, value));
							}
						}
					}
				}
			}
		}).call(this, key, Operation[key]);
	}
	&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;kolaDom 私有方法&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;
	function isChainable(operation){
		if(operation.toString().indexOf(&quot;return &quot;)==-1)
			return true;
		return false;
	}
	exports._private = {};
	&#x2F;&#x2F;数组排重
	exports._private.unique = function(array){
        var flag = false;
        var le = array.length;
        for(var i = 0; i &lt; le; i++){
            for(j = i+1; j &lt; le; j++){
                if(array[i] === array[j]){
                    array[j] = null;
                    flag = true;
                }
            }
        }
        if (flag) {
            var top=0;
            for (var i=0; i &lt; le; i++) {
                if(array[i]!==null)
                    array[top++]=array[i];
            }
            array.splice(top,le-top);
        }
        return array;
    }

	&#x2F;**
	 * 得到元素数组
	 * @method toElements
	 * @private
	 * @param selector {Array&lt;HTMLElement&gt;|HTMLElement|KolaElement|String} 
	 * @return {Array&lt;HTMLElement&gt;}
	 *&#x2F;
	var toElements = exports._private.toElements = function(selector){
		if(KolaClass.isArray(selector)){
			return selector;
		}
		&#x2F;&#x2F;	如果为html
		if(KolaClass.isString(selector)){
			
			var newDom = document.createElement(&#x27;div&#x27;);
			newDom.innerHTML = selector;
			var arr = [];
			for(var i = newDom.children.length-1; i &gt;= 0; i --){
				arr[i] = newDom.children[i];
			}
			exports.fire({type: &quot;DOMNodeInserted&quot;,data: arr});
			return arr;
		}
		&#x2F;&#x2F; 如果是window
		if(selector == window)
			return [selector];
		&#x2F;&#x2F;	如果为KolaElement
		if (selector instanceof exports)
			return selector;
		&#x2F;&#x2F;	如果为HTMLElement
		if (selector.nodeType === 1) 
			return [selector];
		&#x2F;&#x2F; 如果为document或document-fragment
		if(selector.nodeType === 9 || selector.nodeType === 11){
			if(selector.documentElement)
				selector = selector.documentElement;
			return [selector];
		}
		&#x2F;&#x2F;	如果为HTMLCollection的话，那就返回之
		if (!KolaClass.isUndefined(selector.length)) {
			var array = [];
			for (var i = 0, il = selector.length; i &lt; il; i ++) {
				if(selector[i].nodeType === 1)
					array.push(selector[i]);
			}
			return array;
		}
	}
	return exports;
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
