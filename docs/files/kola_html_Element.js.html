<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>kola\html\Element.js - kola</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="kola"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 2.1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Array.html">Array</a></li>
            
                <li><a href="..&#x2F;classes/Class.html">Class</a></li>
            
                <li><a href="..&#x2F;classes/Dispatcher.html">Dispatcher</a></li>
            
                <li><a href="..&#x2F;classes/Function.html">Function</a></li>
            
                <li><a href="..&#x2F;classes/KolaElement.html">KolaElement</a></li>
            
                <li><a href="..&#x2F;classes/Object.html">Object</a></li>
            
                <li><a href="..&#x2F;classes/Packager.html">Packager</a></li>
            
                <li><a href="..&#x2F;classes/String.html">String</a></li>
            
                <li><a href="..&#x2F;classes/window.html">window</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/kola.html">kola</a></li>
            
                <li><a href="..&#x2F;modules/kola.event.html">kola.event</a></li>
            
                <li><a href="..&#x2F;modules/kola.html.html">kola.html</a></li>
            
                <li><a href="..&#x2F;modules/kola.lang.html">kola.lang</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: kola\html\Element.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * kola html Element 包，提供dom元素的封装
 * 
 * @module kola.html
 *&#x2F;

kola(&#x27;kola.html.Element&#x27;,[
	&#x27;kola.lang.Class&#x27;,
	&#x27;kola.lang.Array&#x27;,
	&#x27;kola.html.util.Selector&#x27;,
	&#x27;kola.html.util.Operation&#x27;
],function(KolaClass, KolaArray, Selector, Operation){
	&#x2F;**
	 * kola的KolaElement类
	 * 
	 * @class KolaElement
	 * 
	 *&#x2F;
	var exports = KolaClass({
		__ME: function(selector){
			&#x2F;&#x2F;instanceof当涉及跨iframe时会工作不正常
			if(typeof selector === &quot;string&quot; &amp;&amp; selector.charAt(0) != &#x27;&lt;&#x27;){
				&#x2F;*
					define DomRefer Array&lt;HTMLElement&gt;|NodeList|HtmlCollection|HtmlElement|KolaElement|String
				*&#x2F;
				&#x2F;**
				* 使用选择器选择特定dom
				* @function direct
				* @param selector {String}
				* @return {KolaElement}
				*&#x2F;
				return new this(Selector(selector));
			}else{
				&#x2F;**
				* 根据字符串生成dom，并生成KolaElement
				* @function direct
				* @param selector {String} 要转换的字符串，以html &lt; 格式开头
				* @return {KolaElement}
				*&#x2F;
				&#x2F;**
				* 将指定的dom转换为KolaElement
				* @function direct
				* @param selector {Array&lt;HTMLElement&gt;|NodeList|HtmlCollection|HtmlElement|KolaElement}
				* @return {KolaElement}
				*&#x2F;
				return new this(Operation.toElements(selector));
			}
		},

		&#x2F;**
		* 构造函数
		* @constructor
		* @param elements {Array&lt;HTMLElement&gt;}
		* @return {KolaElement}
		*&#x2F;
		_init: function(elements){
			this.length = elements.length;
			for(var i = 0, il = this.length; i &lt; il; i ++)
				this[i] = elements[i];
		},

		&#x2F;**
		* 依次迭代内部dom，将内部每一个元素封装成KolaElement交给callback处理
		* @method each
		* @param callback {Function} 回调函数
		* @chainable
		*&#x2F;
		each: function (callback) {
			&#x2F;&#x2F;	使用迭代器循环每个元素
			for(var i = 0, il = this.length; i &lt; il; i++){
				callback.call(this, new exports([this[i]]), i);
			}
			return this;
		},

		&#x2F;**
		 * 增加一些元素
		 * @method add
		 * @param sets {DomRefer} 要增加的dom集合
		 * @chainable
		 *&#x2F;
		add: function(sets){
			var elements = Operation.toElements(sets);
			for(var i = 0, il = elements.length; i &lt; il ; i ++){
				this[this.length] = elements[i];
			}
			this.length += elements.length;
			unique(this);
			return this;
		},

		&#x2F;**
		 * 移除一些元素
		 * @method remove
		 * @param sets {DomRefer} 要移除的dom集合
		 * @chainable
		 *&#x2F;
		remove: function(sets){
			var elements = Operation.toElements(sets);
			for(var i=0, il = elements.length; i &lt; il; i++){
				for(var j=0, jl = this.length; j &lt; jl; j++){
					if(this[j] == elements[i]){
						this.splice(j,1);
					}
				}
			}
			return this;
		},
		&#x2F;**
		 * 隐藏元素
		 * @method hide
		 * @chainable
		 *&#x2F;
		hide:function(){
			return this.css(&quot;___Kola___Hidden&quot;, true);
		},
		
		&#x2F;**
		 * 显示元素
		 * @method show
		 * @chainable
		 *&#x2F;
		show:function(){
			return this.css(&quot;___Kola___Hidden&quot;, false);
		},

		outerHtml: function(value){
			if (arguments.length == 0) {
				return Operation.getouterHtml(this[0])
			}else{
				for(var i = 0; i &lt; this.length; i++){
					this[i] = Operation.setouterHtml(this[i], value)[0]
				}
				return this;
			}
		},
		&#x2F;&#x2F;使得浏览器认为实例是一个数组，方便调试
		splice:[].splice
	});
	&#x2F;&#x2F;定义一个针对节点读取属性或设置属性的操作
	function getSet(getFunction, setFunction){
		var functionGroup = [];
		getFunction.isGet = true;
		functionGroup[getFunction.length - 1] = getFunction;
		functionGroup[setFunction.length - 1] = setFunction;
		return functionGroup;
	}
	&#x2F;&#x2F;getSet
	KolaArray.forEach(&#x27;attr,prop,data,css,style,val,html,text&#x27;.split(&#x27;,&#x27;),function(functionName){
		var getSetFunction = getSet(Operation[&#x27;get&#x27; + functionName], Operation[&#x27;set&#x27; + functionName]);
		exports.prototype[functionName] = function(name, value){
			var operater = getSetFunction[arguments.length];
			if(operater.isGet){
				return operater.call(this, this[0], name);
			}else{
				for(var i = 0; i &lt; this.length; i++){
					operater.call(this, this[i], name, value);
				}
				return this;
			}
		}
	});
	&#x2F;&#x2F;first
	KolaArray.forEach(&#x27;bound,height,width,clientPos,pagePos,pos,index,is&#x27;.split(&#x27;,&#x27;),function(functionName){
		exports.prototype[functionName] = function(value){
			if(!this[0] || this[0].nodeType != 1)
				return;
			return Operation[functionName].call(this, this[0], value);
		}
	});
	&#x2F;&#x2F;each
	KolaArray.forEach(&#x27;on,fire,off,mouseleave,mouseenter,detach,append,prepend,before,after&#x27;.split(&#x27;,&#x27;),function(functionName){
		exports.prototype[functionName] = function(p0, p1, p2){
			for(var i = 0; i &lt; this.length; i++){
				Operation[functionName].call(this, this[i], p0, p1, p2);
			}
			return this
		}
	});
	&#x2F;&#x2F;traveller
	KolaArray.forEach(&#x27;parent,parents,closest,children,find,descendants,prev,next&#x27;.split(&#x27;,&#x27;),function(functionName){
		exports.prototype[functionName] = function(p0, p1){
			var results = [];
			for(var i = 0; i &lt; this.length; i++){
				var res = Operation[functionName].call(this, this[i], p0, p1);
				if(KolaClass.isArray(res))
					results = results.concat(res);
				else if(res)
					results.push(res);
			}
			return new exports(unique(results));
		}
	});
	&#x2F;&#x2F;shortcut for events
	KolaArray.forEach(&#x27;click,mouseover,mouseout,mouseup,mousedown,mousemove,keyup,keydown,keypress,focus,blur,submit,change&#x27;.split(&#x27;,&#x27;),function(functionName){
		exports.prototype[functionName] = function(listenerfn,option){
			for(var i = 0; i &lt; this.length; i++){
				if(!listenerfn){
					if(functionName == &quot;submit&quot;)
						this[i].submit();
					if(functionName == &quot;focus&quot;)
						this[i].focus();
					else
						KolaDomEvent.fire(this[i], functionName);
				}else{
					KolaDomEvent.on(this[i], functionName, listenerfn, option);
				}
			}
			return this;
		}
	});
	&#x2F;&#x2F;数组排重
	function unique(array){
		var flag = false;
		var le = array.length;
		for(var i = 0; i &lt; le; i++){
			for(j = i + 1; j &lt; le; j++){
				if(array[i] === array[j]){
					array[j] = null;
					flag = true;
				}
			}
		}
		if (flag) {
			var top=0;
			for (var i=0; i &lt; le; i++) {
				if(array[i]!==null)
					array[top++]=array[i];
			}
			array.splice(top,le-top);
			array.length = top;
		}
		return array;
	}
	return exports;
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
